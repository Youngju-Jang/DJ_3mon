<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        /* default setting */
        * {
            box-sizing: border-box;
            line-height: calc(1em + 0.25rem);
        }

        html {
            font: 18px/1.5 'Nunito', sans-serif;
        }

        body {
            margin: 0;
            min-height: 100vh;
            overflow-x: hidden;
            color: rgba(0, 0, 0, .5);
            font-weight: 300;
        }

        h1 {
            width: 100%;
            font-weight: 300;
            text-align: center;
            margin: 0 0 4rem;
            font-size: 3rem;
        }

        b {
            font-weight: 700;
        }

        header,
        section {
            display: flex;
            flex-wrap: wrap;
            width: 100vw;
            height: 100vh;
            justify-content: space-around;
            align-items: center;
            align-content: center;
            padding: 3rem 1rem;
        }

        /* header setting */

        header {
            background: radial-gradient(circle at top left, hsl(340, 80%, 50%), hsl(270, 80%, 50%));
            color: #fff;
        }

        header h1 {
            margin: 0;
            color: #fff;
        }

        header .title {
            font-size: 5rem;
        }

        header .subtitle {
            font-size: 4rem;
        }

        section:nth-child(odd) {
            background: whitesmoke;
        }

        .box {
            width: 6rem;
            height: 6rem;
            margin: 1rem;
            background: radial-gradient(circle at top left, hsl(340, 80%, 50%), hsl(270, 80%, 50%));
            border-radius: 2rem;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.25);
        }

        /* Keyframes */
        @keyframes slideInUp {
            0% {
                opacity: 0;
                transform: translateY(50%);
            }

            100% {
                opacity: 1;
                transform: none;
            }
        }

        @keyframes slideInDown {
            0% {
                opacity: 0;
                transform: translateY(-50%);
            }

            100% {
                opacity: 1;
                transform: none;
            }
        }

        @keyframes slideInleft {
            0% {
                opacity: 0;
                transform: translateX(50%);
            }

            100% {
                opacity: 1;
                transform: none;
            }
        }

        @keyframes slideInRight {
            0% {
                opacity: 0;
                transform: translateX(-50%);
            }

            100% {
                opacity: 1;
                transform: none;
            }
        }

        @keyframes fadeIn {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }

        @keyframes zoomIn {
            0% {
                opacity: 0;
                transform: scale(0.5);
            }

            100% {
                opacity: 1;
                transform: none;
            }
        }

        @keyframes zoomReverseIn {
            0% {
                opacity: 0;
                transform: scale(1.5);
            }

            100% {
                opacity: 1;
                transform: none;
            }
        }

        @keyframes flipInY {
            0% {
                opacity: 0;
                transform: rotateY(90deg);
            }

            100% {
                opacity: 1;
                transform: none;
            }
        }


        /* Animations */
        [data-animation] {
            opacity: 0;
            animation-timing-function: cubic-bezier(.4, 0, .2, 1);;
            animation-fill-mode: both;
            animation-duration: 1s;
        }

        /* Disable animation of the childs */
        /* Disable animation in yourself */
        .animations-disabled [data-animation] {
                animation: none !important;
                opacity: 1 !important;
        }


        /* Slide Animations */
        .slideInUp {
            animation-name: slideInUp;
        }

        .slideInDown {
            animation-name: slideInDown;
        }

        .slideInLeft {
            animation-name: slideInleft;
        }

        .slideInRight {
            animation-name: slideInRight;
        }


        /* Fade Animations */
        .fadeIn {
            animation-name: fadeIn;
        }

        .fadeOut {
            animation-name: fadeIn;
            animation-direction: reverse;
        }


        /* Zoom Animations */
        .zoomIn {
            animation-name: zoomIn;
        }

        .zoomOut {
            animation-name: zoomIn;
            animation-direction: reverse;
        }

        .zoomReverseIn {
            animation-name: zoomReverseIn;
        }

        .zoomReverseOut {
            animation-name: zoomReverseIn;
            animation-direction: reverse;
        }


        /* Flip Animations */
        .flipInY {
            animation-name: flipInY;
        }

        .flipOutY {
            animation-name: flipInY;
            animation-direction: reverse;
        }
    </style>
</head>

<body>
    <header class="hero" data-animation="fadeIn">
        <h1>
            <div class="title" data-animation="slideInUp" data-animation-delay="600ms"><b>Animate</b></div>
            <div class="subtitle" data-animation="slideInUp" data-animation-delay="1000ms">On Scroll</div>
        </h1>
    </header>

    <section>
        <h1><b>Slide</b> Animation</h1>
        <div class="box" data-animation="slideInRight"></div>
        <div class="box" data-animation="slideInUp" data-animation-delay="300ms"></div>
        <div class="box" data-animation="slideInDown" data-animation-delay="600ms"></div>
        <div class="box" data-animation="slideInLeft" data-animation-delay="900ms"></div>
    </section>

    <section>
        <h1><b>Zoom</b> Animation</h1>
        <div class="box" data-animation="zoomIn"></div>
        <div class="box" data-animation="zoomIn" data-animation-delay="300ms"></div>
        <div class="box" data-animation="zoomIn" data-animation-delay="600ms"></div>
    </section>

    <section>
        <h1><b>Reverse Zoom</b> Animation</h1>
        <div class="box" data-animation="zoomReverseIn"></div>
        <div class="box" data-animation="zoomReverseIn" data-animation-delay="300ms"></div>
        <div class="box" data-animation="zoomReverseIn" data-animation-delay="600ms"></div>
    </section>

    <section>
        <h1><b>Fade</b> Animation</h1>
        <div class="box" data-animation="fadeIn"></div>
        <div class="box" data-animation="fadeIn" data-animation-delay="300ms"></div>
        <div class="box" data-animation="fadeIn" data-animation-delay="600ms"></div>
    </section>

    <section>
        <h1><b>Flip</b> Animation</h1>
        <div class="box" data-animation="flipInY"></div>
        <div class="box" data-animation="flipInY" data-animation-delay="300ms"></div>
        <div class="box" data-animation="flipInY" data-animation-delay="600ms"></div>
    </section>
    <script>
        var Animation = function ({ offset } = { offset: 10 }) {
            var _elements;

            // Define a dobra superior, inferior e laterais da tela
            var windowTop = offset * window.innerHeight / 100;
            var windowBottom = window.innerHeight - windowTop;
            var windowLeft = 0;
            var windowRight = window.innerWidth;

            function start(element) {
                // Seta os atributos customizados
                element.style.animationDelay = element.dataset.animationDelay;
                element.style.animationDuration = element.dataset.animationDuration;
                // Inicia a animacao setando a classe da animacao
                element.classList.add(element.dataset.animation);
                // Seta o elemento como animado
                element.dataset.animated = "true";
            }

            function isElementOnScreen(element) {
                // Obtem o boundingbox do elemento
                var elementRect = element.getBoundingClientRect();
                var elementTop =
                    elementRect.top + parseInt(element.dataset.animationOffset) ||
                    elementRect.top;
                var elementBottom =
                    elementRect.bottom - parseInt(element.dataset.animationOffset) ||
                    elementRect.bottom;
                var elementLeft = elementRect.left;
                var elementRight = elementRect.right;

                // Verifica se o elemento esta na tela
                return (
                    elementTop <= windowBottom &&
                    elementBottom >= windowTop &&
                    elementLeft <= windowRight &&
                    elementRight >= windowLeft
                );
            }

            // Percorre o array de elementos, verifica se o elemento está na tela e inicia animação
            function checkElementsOnScreen(els = _elements) {
                for (var i = 0, len = els.length; i < len; i++) {
                    // Passa para o proximo laço se o elemento ja estiver animado
                    if (els[i].dataset.animated) continue;

                    isElementOnScreen(els[i]) && start(els[i]);
                }
            }

            // Atualiza a lista de elementos a serem animados
            function update() {
                _elements = document.querySelectorAll(
                    "[data-animation]:not([data-animated])"
                );
                checkElementsOnScreen(_elements);
            }

            // Inicia os eventos
            window.addEventListener("load", update, false);
            window.addEventListener("scroll", () => checkElementsOnScreen(_elements), { passive: true });
            window.addEventListener("resize", () => checkElementsOnScreen(_elements), false);

            // Retorna funcoes publicas
            return {
                start,
                isElementOnScreen,
                update
            };
        };

        // Initialize
        var options = {
            offset: 20 //percentage of window
        };
        var animation = new Animation(options);
    </script>
</body>

</html>